{
    "openapi":"3.1.0",
    "info" : {
            "title":"Whisper.cpp API"
            ,"version":"0.1.0"
    },
    "servers": [
        { "url": "http://localhost:8080/" }
    ],
    "paths":{
        "/inference":{
            "post":{
                "tags":["inference"],
                "summary": "Perform inference on a WAV file",
                "operationId": "inference",
                "parameters": [
                    {"name":"content", "type": "string", "in":"form","required":true,"schema":{"type":"string","title":"WAV audio"}},
                    {"temperature":"content", "type": "string", "in":"form","required":false,"schema":{"type":"string","title":"Temperature"}},
                    {"temperature_inc":"content", "type": "string", "in":"form","required":false,"schema":{"type":"string","title":"Temperature increase"}},
                    {"response_format":"content", "type": "string", "in":"form","required":false,"default":"json","schema":{"type":"string","title":"Format of the response"}}
                ],
                "responses":{
                    "200": {
                        "description":"Successful response",
                        "content":{
                            "application/json": {
                                "schema": {"$ref":"#/components/schemas/Transcription"}
                            }
                        }
                    },
                    "default": {
                        "description":"Error response",
                        "content":{
                            "application/json": {
                                "schema": {"$ref":"#/components/schemas/Error"}
                            }
                        }
                    }
                }
            }
        },
        "/load":{
            "post":{
                "tags":["load"],
                "summary": "Load a model",
                "operationId": "load",
                "parameters": [
                    {"name":"content", "description":"WAV audio", "in":"form","required":true,"schema":{"type":"string"}},
                    {"name":"temperature","description":"Temperature", "in":"form","required":false,"schema":{"type":"string"}},
                    {"name":"temperature_inc", "in":"form","required":false,"schema":{"type":"string"}},
                    {"name":"response_format", "description":"Format of the response", "in":"form","required":false,"default":"json","schema":{"type":"string"}}
                ],
                "responses":{
                    "200": {
                        "description":"Successful response",
                        "content":{
                            "application/json": {
                                "schema": {"$ref":"#/components/schemas/Transcription"}
                            }
                        }
                    },
                    "default": {
                        "description":"Error response",
                        "content":{
                            "application/json": {
                                "schema": {"$ref":"#/components/schemas/Error"}
                            }
                        }
                    }
                }
            }
        }
    },
    "components":{
        "schemas":{
            "Transcription":{
                "properties":{"text":{"type":"string","title":"Text"},"filename":{"type":"string","title":"Filename"}},"type":"object","required":["text","filename"],"title":"Transcription"
            },
            "Error":{
                "properties":{"error":{"type":"string"}},"type":"object","title":"Error"
            }
        }
    }
}
